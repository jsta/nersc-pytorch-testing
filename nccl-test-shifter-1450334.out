+ export NCCL_DEBUG=INFO
+ NCCL_DEBUG=INFO
+ srun -N 1 -n 1 shifter python pytorch_info.py
PyTorch module:    <module 'torch' from '/opt/conda/lib/python3.8/site-packages/torch/__init__.py'>
PyTorch version:   1.8.0a0+1606899

CUDA available:    True
CUDA devices:      1
CUDA device:       0
cuDNN available:   True
cuDNN version:     8005

MKL available:     True
MKLDNN available:  True

MPI available:     True
NCCL available:    True
GLOO available:    True

torchvision:       0.9.0a0
torchtext:         0.9.0a0
+ srun -u -l shifter python test_ddp.py --gpu --backend nccl --init-method slurm --ranks-per-node 4
0: Distributed init with master addr 128.55.144.51 port 29500
3: Distributed init with master addr 128.55.144.51 port 29500
1: Distributed init with master addr 128.55.144.51 port 29500
2: Distributed init with master addr 128.55.144.51 port 29500
4: Distributed init with master addr 128.55.144.51 port 29500
5: Distributed init with master addr 128.55.144.51 port 29500
6: Distributed init with master addr 128.55.144.51 port 29500
7: Distributed init with master addr 128.55.144.51 port 29500
0: cgpu08:57123:57123 [0] NCCL INFO Bootstrap : Using ib0:192.168.184.61<0>
0: cgpu08:57123:57123 [0] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
0: cgpu08:57123:57123 [0] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.61<0>
0: cgpu08:57123:57123 [0] NCCL INFO Using network IB
0: NCCL version 2.8.3+cuda11.1
3: cgpu08:57126:57126 [3] NCCL INFO Bootstrap : Using ib0:192.168.184.61<0>
3: cgpu08:57126:57126 [3] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
2: cgpu08:57125:57125 [2] NCCL INFO Bootstrap : Using ib0:192.168.184.61<0>
2: cgpu08:57125:57125 [2] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
1: cgpu08:57124:57124 [1] NCCL INFO Bootstrap : Using ib0:192.168.184.61<0>
1: cgpu08:57124:57124 [1] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
4: cgpu14:53622:53622 [0] NCCL INFO Bootstrap : Using ib0:192.168.184.85<0>
7: cgpu14:53625:53625 [3] NCCL INFO Bootstrap : Using ib0:192.168.184.85<0>
4: cgpu14:53622:53622 [0] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
7: cgpu14:53625:53625 [3] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
2: cgpu08:57125:57125 [2] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.61<0>
2: cgpu08:57125:57125 [2] NCCL INFO Using network IB
3: cgpu08:57126:57126 [3] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.61<0>
3: cgpu08:57126:57126 [3] NCCL INFO Using network IB
1: cgpu08:57124:57124 [1] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.61<0>
1: cgpu08:57124:57124 [1] NCCL INFO Using network IB
4: cgpu14:53622:53622 [0] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.85<0>
4: cgpu14:53622:53622 [0] NCCL INFO Using network IB
7: cgpu14:53625:53625 [3] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.85<0>
7: cgpu14:53625:53625 [3] NCCL INFO Using network IB
6: cgpu14:53624:53624 [2] NCCL INFO Bootstrap : Using ib0:192.168.184.85<0>
6: cgpu14:53624:53624 [2] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
6: cgpu14:53624:53624 [2] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.85<0>
6: cgpu14:53624:53624 [2] NCCL INFO Using network IB
5: cgpu14:53623:53623 [1] NCCL INFO Bootstrap : Using ib0:192.168.184.85<0>
5: cgpu14:53623:53623 [1] NCCL INFO NET/Plugin : No plugin found (libnccl-net.so), using internal implementation
5: cgpu14:53623:53623 [1] NCCL INFO NET/IB : Using [0]mlx5_0:1/IB [1]mlx5_1:1/IB [2]mlx5_2:1/IB [3]mlx5_3:1/RoCE [4]mlx5_4:1/IB [5]mlx5_5:1/IB [6]mlx5_6:1/IB [7]mlx5_7:1/IB ; OOB ib0:192.168.184.85<0>
5: cgpu14:53623:53623 [1] NCCL INFO Using network IB
4: 
4: cgpu14:53622:56536 [0] include/socket.h:406 NCCL WARN Connect to 192.168.184.61<42427> failed : No route to host
4: cgpu14:53622:56536 [0] NCCL INFO bootstrap.cc:354 -> 2
4: cgpu14:53622:56536 [0] NCCL INFO init.cc:564 -> 2
4: cgpu14:53622:56536 [0] NCCL INFO init.cc:878 -> 2
5: 
5: cgpu14:53623:56555 [1] include/socket.h:406 NCCL WARN Connect to 192.168.184.61<42427> failed : No route to host
5: cgpu14:53623:56555 [1] NCCL INFO bootstrap.cc:354 -> 2
5: cgpu14:53623:56555 [1] NCCL INFO init.cc:564 -> 2
5: cgpu14:53623:56555 [1] NCCL INFO init.cc:878 -> 2
6: 
6: cgpu14:53624:56552 [2] include/socket.h:406 NCCL WARN Connect to 192.168.184.61<42427> failed : No route to host
6: cgpu14:53624:56552 [2] NCCL INFO bootstrap.cc:354 -> 2
6: cgpu14:53624:56552 [2] NCCL INFO init.cc:564 -> 2
6: cgpu14:53624:56552 [2] NCCL INFO init.cc:878 -> 2
7: 
7: cgpu14:53625:56537 [3] include/socket.h:406 NCCL WARN Connect to 192.168.184.61<42427> failed : No route to host
7: cgpu14:53625:56537 [3] NCCL INFO bootstrap.cc:354 -> 2
7: cgpu14:53625:56537 [3] NCCL INFO init.cc:564 -> 2
7: cgpu14:53625:56537 [3] NCCL INFO init.cc:878 -> 2
srun: error: cgpu14: task 4: Segmentation fault
srun: Terminating job step 1450334.1
0: slurmstepd: error: *** STEP 1450334.1 ON cgpu08 CANCELLED AT 2021-02-03T22:47:42 ***
srun: error: cgpu14: tasks 5-6: Segmentation fault
srun: error: cgpu14: task 7: Segmentation fault
srun: error: cgpu08: tasks 1,3: Terminated
srun: error: cgpu08: task 2: Terminated
srun: error: cgpu08: task 0: Terminated
srun: Force Terminated job step 1450334.1
+ set +x
All done!
